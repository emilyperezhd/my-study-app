{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/emilyperez/Study%20App/my-study-app/src/app/actions.ts"],"sourcesContent":["'use server'\n\nimport { db } from \"../lib/db\";\nimport { revalidatePath } from \"next/cache\";\nimport { ChatOpenAI } from \"@langchain/openai\";\nimport { PromptTemplate } from \"@langchain/core/prompts\";\n\n// --- 1. BROWSER MOCKS (Prevents Crashes) ---\n// @ts-ignore\nif (!global.DOMMatrix) { global.DOMMatrix = class DOMMatrix { constructor() {} }; }\n// @ts-ignore\nif (!global.ImageData) { global.ImageData = class ImageData { constructor() {} }; }\n// @ts-ignore\nif (!global.Path2D) { global.Path2D = class Path2D { constructor() {} }; }\n\n// --- 2. SMART IMPORT ---\nlet pdfParse = require(\"pdf-parse\");\nif (typeof pdfParse !== 'function' && pdfParse.default) {\n    pdfParse = pdfParse.default;\n}\n\n// -----------------------------------------------------------\n\nexport async function uploadPdf(formData: FormData) {\n  try {\n    const file = formData.get(\"file\") as File;\n    if (!file) throw new Error(\"No file found\");\n\n    const arrayBuffer = await file.arrayBuffer();\n    const buffer = Buffer.from(arrayBuffer);\n\n    let finalContent = \"No text found.\";\n    \n    try {\n        const data = await pdfParse(buffer);\n        if (data && data.text && data.text.trim().length > 0) {\n            finalContent = data.text;\n        } else {\n            finalContent = \"‚ö†Ô∏è This PDF appears to be empty or scanned (image-only). Text could not be extracted.\";\n        }\n    } catch (parseError) {\n        console.error(\"PDF Parse Error:\", parseError);\n        finalContent = \"‚ö†Ô∏è Error parsing PDF. File might be corrupted or encrypted.\";\n    }\n\n    await db.course.create({\n      data: {\n        title: file.name,\n        content: finalContent,\n      }\n    });\n\n    revalidatePath(\"/\");\n  } catch (error) {\n    console.error(\"Upload Error:\", error);\n  }\n}\n\nexport async function generateStudyGuide(id: string) {\n  try {\n    const note = await db.course.findUnique({ where: { id: id } });\n    if (!note || !note.content) throw new Error(\"Note not found\");\n\n    const model = new ChatOpenAI({ \n      modelName: \"gpt-4o-mini\", \n      openAIApiKey: process.env.OPENAI_API_KEY \n    });\n\n    const prompt = PromptTemplate.fromTemplate(\n      `You are a strict academic tutor. Create a structured study guide.\n       Rules: HTML format only, use <h1>, <h2>, <ul>, <strong>. No Markdown.\n       Text: {text}`\n    );\n\n    const chain = prompt.pipe(model);\n    const response = await chain.invoke({ text: note.content.slice(0, 25000) });\n\n    await db.course.update({\n      where: { id: id },\n      data: { summary: response.content as string }\n    });\n\n    revalidatePath(`/notes/${id}`);\n  } catch (error) {\n    console.error(\"AI Study Guide Error:\", error);\n  }\n}\n\nexport async function generateQuiz(id: string) {\n  try {\n    const note = await db.course.findUnique({ where: { id: id } });\n    if (!note || !note.content) throw new Error(\"Note not found\");\n\n    const model = new ChatOpenAI({\n      modelName: \"gpt-4o-mini\",\n      openAIApiKey: process.env.OPENAI_API_KEY,\n      temperature: 0.1, \n      modelKwargs: { response_format: { type: \"json_object\" } } \n    });\n\n    const prompt = PromptTemplate.fromTemplate(\n      `Generate 5 difficult multiple-choice questions based on the provided text.\n       Return JSON object: {{ \"questions\": [ {{ \"question\": \"...\", \"options\": [\"...\"], \"answer\": \"...\" }} ] }}\n       Text: {text}`\n    );\n\n    const chain = prompt.pipe(model);\n    const response = await chain.invoke({ text: note.content.slice(0, 25000) });\n    \n    const content = typeof response.content === 'string' ? response.content : JSON.stringify(response.content);\n    const data = JSON.parse(content);\n    \n    await db.question.createMany({\n      data: data.questions.map((q: any) => ({\n        courseId: id,\n        question: q.question,\n        options: q.options,\n        answer: q.answer\n      }))\n    });\n\n    revalidatePath(`/notes/${id}`);\n  } catch (error) {\n    console.error(\"AI Quiz Error:\", error);\n  }\n}\n\nexport async function generateFlashcards(id: string) {\n  try {\n    const note = await db.course.findUnique({ where: { id: id } });\n    if (!note || !note.content) throw new Error(\"Note not found\");\n\n    const model = new ChatOpenAI({\n      modelName: \"gpt-4o-mini\",\n      openAIApiKey: process.env.OPENAI_API_KEY,\n      temperature: 0.1, \n      modelKwargs: { response_format: { type: \"json_object\" } } \n    });\n\n    const prompt = PromptTemplate.fromTemplate(\n      `Generate 15 study flashcards based on the provided text.\n       Focus on key definitions, formulas, and concepts.\n       Return JSON object: {{ \"flashcards\": [ {{ \"front\": \"Term\", \"back\": \"Definition\" }} ] }}\n       Text: {text}`\n    );\n\n    const chain = prompt.pipe(model);\n    const response = await chain.invoke({ text: note.content.slice(0, 25000) });\n    \n    const content = typeof response.content === 'string' ? response.content : JSON.stringify(response.content);\n    const data = JSON.parse(content);\n    \n    await db.flashcard.createMany({\n      data: data.flashcards.map((f: any) => ({\n        courseId: id,\n        front: f.front,\n        back: f.back\n      }))\n    });\n\n    revalidatePath(`/notes/${id}`);\n  } catch (error) {\n    console.error(\"Flashcard Gen Error:\", error);\n  }\n}\n\nexport async function generatePracticeExam(id: string) {\n  try {\n    const note = await db.course.findUnique({ where: { id: id } });\n    if (!note || !note.content) throw new Error(\"Note not found\");\n\n    const model = new ChatOpenAI({\n      modelName: \"gpt-4o-mini\",\n      openAIApiKey: process.env.OPENAI_API_KEY,\n      temperature: 0.1, \n      modelKwargs: { response_format: { type: \"json_object\" } } \n    });\n\n    const prompt = PromptTemplate.fromTemplate(\n      `Generate a Practice Midterm Exam with 20 difficult multiple-choice questions based on the text.\n       Include an \"explanation\" field explaining the correct answer.\n       Return JSON object: \n       {{ \"questions\": [ {{ \"question\": \"...\", \"options\": [\"...\"], \"answer\": \"...\", \"explanation\": \"...\" }} ] }}\n       Text: {text}`\n    );\n\n    const chain = prompt.pipe(model);\n    const response = await chain.invoke({ text: note.content.slice(0, 30000) });\n    \n    const content = typeof response.content === 'string' ? response.content : JSON.stringify(response.content);\n    const data = JSON.parse(content);\n    \n    await db.examQuestion.createMany({\n      data: data.questions.map((q: any) => ({\n        courseId: id,\n        question: q.question,\n        options: q.options,\n        answer: q.answer,\n        explanation: q.explanation\n      }))\n    });\n\n    revalidatePath(`/notes/${id}`);\n  } catch (error) {\n    console.error(\"Exam Gen Error:\", error);\n  }\n}\n\nexport async function generateCrossword(id: string) {\n  try {\n    const note = await db.course.findUnique({ where: { id: id } });\n    if (!note || !note.content) throw new Error(\"Note not found\");\n\n    const model = new ChatOpenAI({\n      modelName: \"gpt-4o\", // Stronger model for puzzles\n      openAIApiKey: process.env.OPENAI_API_KEY,\n      temperature: 0.1, \n      modelKwargs: { response_format: { type: \"json_object\" } } \n    });\n\n    // FIX: Using double curly braces {{ }} to escape the example JSON so LangChain doesn't crash\n    const prompt = PromptTemplate.fromTemplate(\n      `Generate a 10x10 Crossword Puzzle based on the provided text.\n       \n       Rules:\n       1. The grid must be 10x10.\n       2. Use standard crossword rules (words intersect).\n       3. Return a JSON object with:\n          - \"grid\": A 2D array (10 rows of 10 characters). Use '' (empty string) for black squares, single uppercase letters for filled.\n          - \"clues\": An object with \"across\" and \"down\" arrays. Each item: {{ \"number\": 1, \"clue\": \"...\" }}.\n          - \"numbers\": A 2D array (10x10) matching the grid. Put the clue number (1, 2...) in the start cell. 0 if none.\n       \n       Text content: {text}`\n    );\n\n    const chain = prompt.pipe(model);\n    const response = await chain.invoke({ text: note.content.slice(0, 30000) });\n    \n    const content = typeof response.content === 'string' ? response.content : JSON.stringify(response.content);\n    const data = JSON.parse(content);\n    \n    await db.crossword.create({\n      data: {\n        courseId: id,\n        puzzle: data\n      }\n    });\n\n    revalidatePath(`/notes/${id}`);\n  } catch (error) {\n    console.error(\"Crossword Gen Error:\", error);\n  }\n}\n\nexport async function saveQuizResult(courseId: string, score: number, total: number) {\n  try {\n    await db.quizResult.create({\n      data: { courseId, score, total },\n    });\n    revalidatePath(`/notes/${courseId}`);\n  } catch (error) {\n    console.error(\"Save Error:\", error);\n  }\n}\n\nexport async function saveExamResult(courseId: string, score: number, total: number) {\n  try {\n    await db.examResult.create({\n      data: { courseId, score, total },\n    });\n    revalidatePath(`/notes/${courseId}`);\n  } catch (error) {\n    console.error(\"Exam Save Error:\", error);\n  }\n}"],"names":[],"mappings":";;;;;;;IA8PsB,iBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/emilyperez/Study%20App/my-study-app/src/components/QuizApp.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { saveQuizResult } from \"../app/actions\"; // <--- Import the action\n\ntype Question = {\n  id: string;\n  question: string;\n  options: string[];\n  answer: string;\n};\n\n// We need the courseId to know WHERE to save the result\nexport default function QuizApp({ \n  questions, \n  courseId \n}: { \n  questions: Question[], \n  courseId: string \n}) {\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [score, setScore] = useState(0);\n  const [showScore, setShowScore] = useState(false);\n  const [selectedOption, setSelectedOption] = useState<string | null>(null);\n  \n  const handleAnswer = async (option: string) => { // Made async\n    const correct = option === questions[currentQuestion].answer;\n    setSelectedOption(option);\n    \n    // Calculate new score immediately so we don't wait for state update\n    const newScore = correct ? score + 1 : score;\n    if (correct) setScore(newScore);\n\n    // Wait 1 second\n    setTimeout(async () => {\n      const nextQuestion = currentQuestion + 1;\n      if (nextQuestion < questions.length) {\n        setCurrentQuestion(nextQuestion);\n        setSelectedOption(null);\n      } else {\n        setShowScore(true);\n        // --- SAVE THE RESULT ---\n        await saveQuizResult(courseId, newScore, questions.length);\n      }\n    }, 1000);\n  };\n\n  const resetQuiz = () => {\n    setCurrentQuestion(0);\n    setScore(0);\n    setShowScore(false);\n    setSelectedOption(null);\n  };\n\n  if (questions.length === 0) return null;\n\n  return (\n    <div className=\"bg-white p-8 rounded-xl shadow-lg border border-orange-200 mt-8\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h2 className=\"text-2xl font-bold text-orange-600\">üß† Practice Quiz</h2>\n        {!showScore && (\n          <span className=\"text-sm font-medium text-gray-500 bg-gray-100 px-3 py-1 rounded-full\">\n            {currentQuestion + 1} / {questions.length}\n          </span>\n        )}\n      </div>\n\n      {showScore ? (\n        <div className=\"text-center py-10\">\n          <div className=\"text-6xl mb-4\">{score === questions.length ? \"üéâ\" : \"üìà\"}</div>\n          <p className=\"text-2xl font-bold text-gray-800 mb-2\">\n            You scored {score} out of {questions.length}\n          </p>\n          <p className=\"text-green-600 font-bold mb-6\">Result Saved! ‚úÖ</p>\n          <button \n            onClick={resetQuiz}\n            className=\"bg-orange-600 text-white px-8 py-3 rounded-xl font-semibold hover:bg-orange-700 transition\"\n          >\n            Retake Quiz\n          </button>\n        </div>\n      ) : (\n        <div>\n          <h3 className=\"text-xl font-semibold mb-8 text-gray-800 leading-relaxed\">\n            {questions[currentQuestion].question}\n          </h3>\n          <div className=\"grid gap-4\">\n            {questions[currentQuestion].options.map((option, index) => {\n              let btnClass = \"p-5 rounded-xl border-2 text-left transition-all font-medium \";\n              if (selectedOption) {\n                 if (option === questions[currentQuestion].answer) btnClass += \"bg-green-50 border-green-500 text-green-700\";\n                 else if (option === selectedOption) btnClass += \"bg-red-50 border-red-500 text-red-700\";\n                 else btnClass += \"bg-gray-50 border-gray-100 text-gray-400 opacity-50\";\n              } else {\n                 btnClass += \"bg-white border-gray-200 hover:border-orange-400 hover:bg-orange-50 text-gray-700\";\n              }\n              return (\n                <button\n                  key={index}\n                  onClick={() => !selectedOption && handleAnswer(option)}\n                  disabled={!!selectedOption}\n                  className={btnClass}\n                >\n                  <span className=\"mr-3 text-gray-400 font-mono text-sm\">{String.fromCharCode(65 + index)}.</span>\n                  {option}\n                </button>\n              );\n            })}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA,4PAAiD,yBAAyB;AAH1E;;;;AAae,SAAS,QAAQ,EAC9B,SAAS,EACT,QAAQ,EAIT;IACC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAgB;IAEpE,MAAM,eAAe,OAAO;QAC1B,MAAM,UAAU,WAAW,SAAS,CAAC,gBAAgB,CAAC,MAAM;QAC5D,kBAAkB;QAElB,oEAAoE;QACpE,MAAM,WAAW,UAAU,QAAQ,IAAI;QACvC,IAAI,SAAS,SAAS;QAEtB,gBAAgB;QAChB,WAAW;YACT,MAAM,eAAe,kBAAkB;YACvC,IAAI,eAAe,UAAU,MAAM,EAAE;gBACnC,mBAAmB;gBACnB,kBAAkB;YACpB,OAAO;gBACL,aAAa;gBACb,0BAA0B;gBAC1B,MAAM,IAAA,oKAAc,EAAC,UAAU,UAAU,UAAU,MAAM;YAC3D;QACF,GAAG;IACL;IAEA,MAAM,YAAY;QAChB,mBAAmB;QACnB,SAAS;QACT,aAAa;QACb,kBAAkB;IACpB;IAEA,IAAI,UAAU,MAAM,KAAK,GAAG,OAAO;IAEnC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAqC;;;;;;oBAClD,CAAC,2BACA,8OAAC;wBAAK,WAAU;;4BACb,kBAAkB;4BAAE;4BAAI,UAAU,MAAM;;;;;;;;;;;;;YAK9C,0BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCAAiB,UAAU,UAAU,MAAM,GAAG,OAAO;;;;;;kCACpE,8OAAC;wBAAE,WAAU;;4BAAwC;4BACvC;4BAAM;4BAAS,UAAU,MAAM;;;;;;;kCAE7C,8OAAC;wBAAE,WAAU;kCAAgC;;;;;;kCAC7C,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;qCAKH,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCACX,SAAS,CAAC,gBAAgB,CAAC,QAAQ;;;;;;kCAEtC,8OAAC;wBAAI,WAAU;kCACZ,SAAS,CAAC,gBAAgB,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,QAAQ;4BAC/C,IAAI,WAAW;4BACf,IAAI,gBAAgB;gCACjB,IAAI,WAAW,SAAS,CAAC,gBAAgB,CAAC,MAAM,EAAE,YAAY;qCACzD,IAAI,WAAW,gBAAgB,YAAY;qCAC3C,YAAY;4BACpB,OAAO;gCACJ,YAAY;4BACf;4BACA,qBACE,8OAAC;gCAEC,SAAS,IAAM,CAAC,kBAAkB,aAAa;gCAC/C,UAAU,CAAC,CAAC;gCACZ,WAAW;;kDAEX,8OAAC;wCAAK,WAAU;;4CAAwC,OAAO,YAAY,CAAC,KAAK;4CAAO;;;;;;;oCACvF;;+BANI;;;;;wBASX;;;;;;;;;;;;;;;;;;AAMZ"}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file:///Users/emilyperez/Study%20App/my-study-app/src/components/FlashcardApp.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\n\ntype Flashcard = {\n  id: string;\n  front: string;\n  back: string;\n};\n\nexport default function FlashcardApp({ flashcards }: { flashcards: Flashcard[] }) {\n  const [index, setIndex] = useState(0);\n  const [isFlipped, setIsFlipped] = useState(false);\n\n  const nextCard = () => {\n    setIsFlipped(false);\n    setTimeout(() => setIndex((prev) => (prev + 1) % flashcards.length), 300);\n  };\n\n  const prevCard = () => {\n    setIsFlipped(false);\n    setTimeout(() => setIndex((prev) => (prev - 1 + flashcards.length) % flashcards.length), 300);\n  };\n\n  if (flashcards.length === 0) return null;\n\n  return (\n    // MAIN CONTAINER: Added gap-12 for lots of vertical breathing room\n    <div className=\"w-full bg-white p-8 rounded-xl shadow-sm border border-gray-200 mt-8 flex flex-col gap-12\">\n      \n      {/* 1. HEADER */}\n      <div className=\"flex justify-between items-center border-b border-gray-100 pb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-800 tracking-tight flex items-center gap-2\">\n          <span className=\"text-3xl\">‚ö°</span> Flashcards\n        </h2>\n        <span className=\"text-sm font-bold text-gray-500 bg-gray-100 px-4 py-2 rounded-full border border-gray-200\">\n          {index + 1} / {flashcards.length}\n        </span>\n      </div>\n\n      {/* 2. CARD CONTAINER */}\n      {/* Forced height 500px. */}\n      <div \n        className=\"w-full relative group cursor-pointer perspective-1000\"\n        onClick={() => setIsFlipped(!isFlipped)}\n        style={{ height: \"500px\", perspective: \"1000px\" }}\n      >\n        <div \n          className=\"relative w-full h-full duration-500 transition-all rounded-3xl shadow-lg\"\n          style={{\n            transformStyle: \"preserve-3d\",\n            transform: isFlipped ? \"rotateY(180deg)\" : \"rotateY(0deg)\"\n          }}\n        >\n          \n          {/* --- FRONT SIDE (Term) --- */}\n          {/* bg-pink-50/80 creates that colored-but-transparent glass look */}\n          <div \n            className=\"absolute inset-0 w-full h-full bg-pink-50/80 backdrop-blur-sm border-2 border-pink-100 rounded-3xl flex flex-col items-center justify-center p-12 text-center\"\n            style={{ backfaceVisibility: \"hidden\" }}\n          >\n            <div className=\"w-full flex-1 flex items-center justify-center overflow-y-auto custom-scrollbar pb-8\">\n              <p className=\"text-4xl font-bold text-gray-900 leading-tight tracking-tight\">\n                {flashcards[index].front}\n              </p>\n            </div>\n            \n            <div className=\"mt-4\">\n              <span className=\"text-xs font-bold text-pink-500 uppercase tracking-widest bg-white px-6 py-2 rounded-full shadow-sm border border-pink-100\">\n                Tap to Flip üëÜ\n              </span>\n            </div>\n          </div>\n\n          {/* --- BACK SIDE (Definition) --- */}\n          {/* Solid Pink for high contrast against the front */}\n          <div \n            className=\"absolute inset-0 w-full h-full bg-pink-600 text-white rounded-3xl flex flex-col items-center justify-center p-12 text-center shadow-inner\"\n            style={{ \n              backfaceVisibility: \"hidden\", \n              transform: \"rotateY(180deg)\" \n            }}\n          >\n            <div className=\"w-full flex-1 flex items-center justify-center overflow-y-auto custom-scrollbar pb-8\">\n              <p className=\"text-2xl font-medium leading-relaxed antialiased\">\n                {flashcards[index].back}\n              </p>\n            </div>\n\n            <div className=\"mt-4\">\n              <span className=\"text-xs font-bold text-white/90 uppercase tracking-widest border-2 border-white/20 px-6 py-2 rounded-full\">\n                Definition\n              </span>\n            </div>\n          </div>\n\n        </div>\n      </div>\n\n      {/* 3. BUTTONS */}\n      {/* Switched to Indigo Blue to stand out from the Pink card */}\n      <div className=\"grid grid-cols-2 gap-6 border-t border-gray-100 pt-6\">\n        <button \n          onClick={(e) => { e.stopPropagation(); prevCard(); }}\n          className=\"w-full py-4 bg-white border-2 border-indigo-100 text-indigo-600 hover:bg-indigo-50 hover:border-indigo-200 rounded-xl font-bold text-lg transition shadow-sm\"\n        >\n          ‚Üê Previous\n        </button>\n        \n        <button \n          onClick={(e) => { e.stopPropagation(); nextCard(); }}\n          className=\"w-full py-4 bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-lg rounded-xl font-bold text-lg transition shadow-md\"\n        >\n          Next Card ‚Üí\n        </button>\n      </div>\n\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUe,SAAS,aAAa,EAAE,UAAU,EAA+B;IAC9E,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,MAAM,WAAW;QACf,aAAa;QACb,WAAW,IAAM,SAAS,CAAC,OAAS,CAAC,OAAO,CAAC,IAAI,WAAW,MAAM,GAAG;IACvE;IAEA,MAAM,WAAW;QACf,aAAa;QACb,WAAW,IAAM,SAAS,CAAC,OAAS,CAAC,OAAO,IAAI,WAAW,MAAM,IAAI,WAAW,MAAM,GAAG;IAC3F;IAEA,IAAI,WAAW,MAAM,KAAK,GAAG,OAAO;IAEpC,OACE,mEAAmE;kBACnE,8OAAC;QAAI,WAAU;;0BAGb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;;0CACZ,8OAAC;gCAAK,WAAU;0CAAW;;;;;;4BAAQ;;;;;;;kCAErC,8OAAC;wBAAK,WAAU;;4BACb,QAAQ;4BAAE;4BAAI,WAAW,MAAM;;;;;;;;;;;;;0BAMpC,8OAAC;gBACC,WAAU;gBACV,SAAS,IAAM,aAAa,CAAC;gBAC7B,OAAO;oBAAE,QAAQ;oBAAS,aAAa;gBAAS;0BAEhD,cAAA,8OAAC;oBACC,WAAU;oBACV,OAAO;wBACL,gBAAgB;wBAChB,WAAW,YAAY,oBAAoB;oBAC7C;;sCAKA,8OAAC;4BACC,WAAU;4BACV,OAAO;gCAAE,oBAAoB;4BAAS;;8CAEtC,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAE,WAAU;kDACV,UAAU,CAAC,MAAM,CAAC,KAAK;;;;;;;;;;;8CAI5B,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAK,WAAU;kDAA6H;;;;;;;;;;;;;;;;;sCAQjJ,8OAAC;4BACC,WAAU;4BACV,OAAO;gCACL,oBAAoB;gCACpB,WAAW;4BACb;;8CAEA,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAE,WAAU;kDACV,UAAU,CAAC,MAAM,CAAC,IAAI;;;;;;;;;;;8CAI3B,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAK,WAAU;kDAA4G;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAWpI,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,SAAS,CAAC;4BAAQ,EAAE,eAAe;4BAAI;wBAAY;wBACnD,WAAU;kCACX;;;;;;kCAID,8OAAC;wBACC,SAAS,CAAC;4BAAQ,EAAE,eAAe;4BAAI;wBAAY;wBACnD,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAOT"}},
    {"offset": {"line": 427, "column": 0}, "map": {"version":3,"sources":["file:///Users/emilyperez/Study%20App/my-study-app/src/app/actions.ts"],"sourcesContent":["'use server'\n\nimport { db } from \"../lib/db\";\nimport { revalidatePath } from \"next/cache\";\nimport { ChatOpenAI } from \"@langchain/openai\";\nimport { PromptTemplate } from \"@langchain/core/prompts\";\n\n// --- 1. BROWSER MOCKS (Prevents Crashes) ---\n// @ts-ignore\nif (!global.DOMMatrix) { global.DOMMatrix = class DOMMatrix { constructor() {} }; }\n// @ts-ignore\nif (!global.ImageData) { global.ImageData = class ImageData { constructor() {} }; }\n// @ts-ignore\nif (!global.Path2D) { global.Path2D = class Path2D { constructor() {} }; }\n\n// --- 2. SMART IMPORT ---\nlet pdfParse = require(\"pdf-parse\");\nif (typeof pdfParse !== 'function' && pdfParse.default) {\n    pdfParse = pdfParse.default;\n}\n\n// -----------------------------------------------------------\n\nexport async function uploadPdf(formData: FormData) {\n  try {\n    const file = formData.get(\"file\") as File;\n    if (!file) throw new Error(\"No file found\");\n\n    const arrayBuffer = await file.arrayBuffer();\n    const buffer = Buffer.from(arrayBuffer);\n\n    let finalContent = \"No text found.\";\n    \n    try {\n        const data = await pdfParse(buffer);\n        if (data && data.text && data.text.trim().length > 0) {\n            finalContent = data.text;\n        } else {\n            finalContent = \"‚ö†Ô∏è This PDF appears to be empty or scanned (image-only). Text could not be extracted.\";\n        }\n    } catch (parseError) {\n        console.error(\"PDF Parse Error:\", parseError);\n        finalContent = \"‚ö†Ô∏è Error parsing PDF. File might be corrupted or encrypted.\";\n    }\n\n    await db.course.create({\n      data: {\n        title: file.name,\n        content: finalContent,\n      }\n    });\n\n    revalidatePath(\"/\");\n  } catch (error) {\n    console.error(\"Upload Error:\", error);\n  }\n}\n\nexport async function generateStudyGuide(id: string) {\n  try {\n    const note = await db.course.findUnique({ where: { id: id } });\n    if (!note || !note.content) throw new Error(\"Note not found\");\n\n    const model = new ChatOpenAI({ \n      modelName: \"gpt-4o-mini\", \n      openAIApiKey: process.env.OPENAI_API_KEY \n    });\n\n    const prompt = PromptTemplate.fromTemplate(\n      `You are a strict academic tutor. Create a structured study guide.\n       Rules: HTML format only, use <h1>, <h2>, <ul>, <strong>. No Markdown.\n       Text: {text}`\n    );\n\n    const chain = prompt.pipe(model);\n    const response = await chain.invoke({ text: note.content.slice(0, 25000) });\n\n    await db.course.update({\n      where: { id: id },\n      data: { summary: response.content as string }\n    });\n\n    revalidatePath(`/notes/${id}`);\n  } catch (error) {\n    console.error(\"AI Study Guide Error:\", error);\n  }\n}\n\nexport async function generateQuiz(id: string) {\n  try {\n    const note = await db.course.findUnique({ where: { id: id } });\n    if (!note || !note.content) throw new Error(\"Note not found\");\n\n    const model = new ChatOpenAI({\n      modelName: \"gpt-4o-mini\",\n      openAIApiKey: process.env.OPENAI_API_KEY,\n      temperature: 0.1, \n      modelKwargs: { response_format: { type: \"json_object\" } } \n    });\n\n    const prompt = PromptTemplate.fromTemplate(\n      `Generate 5 difficult multiple-choice questions based on the provided text.\n       Return JSON object: {{ \"questions\": [ {{ \"question\": \"...\", \"options\": [\"...\"], \"answer\": \"...\" }} ] }}\n       Text: {text}`\n    );\n\n    const chain = prompt.pipe(model);\n    const response = await chain.invoke({ text: note.content.slice(0, 25000) });\n    \n    const content = typeof response.content === 'string' ? response.content : JSON.stringify(response.content);\n    const data = JSON.parse(content);\n    \n    await db.question.createMany({\n      data: data.questions.map((q: any) => ({\n        courseId: id,\n        question: q.question,\n        options: q.options,\n        answer: q.answer\n      }))\n    });\n\n    revalidatePath(`/notes/${id}`);\n  } catch (error) {\n    console.error(\"AI Quiz Error:\", error);\n  }\n}\n\nexport async function generateFlashcards(id: string) {\n  try {\n    const note = await db.course.findUnique({ where: { id: id } });\n    if (!note || !note.content) throw new Error(\"Note not found\");\n\n    const model = new ChatOpenAI({\n      modelName: \"gpt-4o-mini\",\n      openAIApiKey: process.env.OPENAI_API_KEY,\n      temperature: 0.1, \n      modelKwargs: { response_format: { type: \"json_object\" } } \n    });\n\n    const prompt = PromptTemplate.fromTemplate(\n      `Generate 15 study flashcards based on the provided text.\n       Focus on key definitions, formulas, and concepts.\n       Return JSON object: {{ \"flashcards\": [ {{ \"front\": \"Term\", \"back\": \"Definition\" }} ] }}\n       Text: {text}`\n    );\n\n    const chain = prompt.pipe(model);\n    const response = await chain.invoke({ text: note.content.slice(0, 25000) });\n    \n    const content = typeof response.content === 'string' ? response.content : JSON.stringify(response.content);\n    const data = JSON.parse(content);\n    \n    await db.flashcard.createMany({\n      data: data.flashcards.map((f: any) => ({\n        courseId: id,\n        front: f.front,\n        back: f.back\n      }))\n    });\n\n    revalidatePath(`/notes/${id}`);\n  } catch (error) {\n    console.error(\"Flashcard Gen Error:\", error);\n  }\n}\n\nexport async function generatePracticeExam(id: string) {\n  try {\n    const note = await db.course.findUnique({ where: { id: id } });\n    if (!note || !note.content) throw new Error(\"Note not found\");\n\n    const model = new ChatOpenAI({\n      modelName: \"gpt-4o-mini\",\n      openAIApiKey: process.env.OPENAI_API_KEY,\n      temperature: 0.1, \n      modelKwargs: { response_format: { type: \"json_object\" } } \n    });\n\n    const prompt = PromptTemplate.fromTemplate(\n      `Generate a Practice Midterm Exam with 20 difficult multiple-choice questions based on the text.\n       Include an \"explanation\" field explaining the correct answer.\n       Return JSON object: \n       {{ \"questions\": [ {{ \"question\": \"...\", \"options\": [\"...\"], \"answer\": \"...\", \"explanation\": \"...\" }} ] }}\n       Text: {text}`\n    );\n\n    const chain = prompt.pipe(model);\n    const response = await chain.invoke({ text: note.content.slice(0, 30000) });\n    \n    const content = typeof response.content === 'string' ? response.content : JSON.stringify(response.content);\n    const data = JSON.parse(content);\n    \n    await db.examQuestion.createMany({\n      data: data.questions.map((q: any) => ({\n        courseId: id,\n        question: q.question,\n        options: q.options,\n        answer: q.answer,\n        explanation: q.explanation\n      }))\n    });\n\n    revalidatePath(`/notes/${id}`);\n  } catch (error) {\n    console.error(\"Exam Gen Error:\", error);\n  }\n}\n\nexport async function generateCrossword(id: string) {\n  try {\n    const note = await db.course.findUnique({ where: { id: id } });\n    if (!note || !note.content) throw new Error(\"Note not found\");\n\n    const model = new ChatOpenAI({\n      modelName: \"gpt-4o\", // Stronger model for puzzles\n      openAIApiKey: process.env.OPENAI_API_KEY,\n      temperature: 0.1, \n      modelKwargs: { response_format: { type: \"json_object\" } } \n    });\n\n    // FIX: Using double curly braces {{ }} to escape the example JSON so LangChain doesn't crash\n    const prompt = PromptTemplate.fromTemplate(\n      `Generate a 10x10 Crossword Puzzle based on the provided text.\n       \n       Rules:\n       1. The grid must be 10x10.\n       2. Use standard crossword rules (words intersect).\n       3. Return a JSON object with:\n          - \"grid\": A 2D array (10 rows of 10 characters). Use '' (empty string) for black squares, single uppercase letters for filled.\n          - \"clues\": An object with \"across\" and \"down\" arrays. Each item: {{ \"number\": 1, \"clue\": \"...\" }}.\n          - \"numbers\": A 2D array (10x10) matching the grid. Put the clue number (1, 2...) in the start cell. 0 if none.\n       \n       Text content: {text}`\n    );\n\n    const chain = prompt.pipe(model);\n    const response = await chain.invoke({ text: note.content.slice(0, 30000) });\n    \n    const content = typeof response.content === 'string' ? response.content : JSON.stringify(response.content);\n    const data = JSON.parse(content);\n    \n    await db.crossword.create({\n      data: {\n        courseId: id,\n        puzzle: data\n      }\n    });\n\n    revalidatePath(`/notes/${id}`);\n  } catch (error) {\n    console.error(\"Crossword Gen Error:\", error);\n  }\n}\n\nexport async function saveQuizResult(courseId: string, score: number, total: number) {\n  try {\n    await db.quizResult.create({\n      data: { courseId, score, total },\n    });\n    revalidatePath(`/notes/${courseId}`);\n  } catch (error) {\n    console.error(\"Save Error:\", error);\n  }\n}\n\nexport async function saveExamResult(courseId: string, score: number, total: number) {\n  try {\n    await db.examResult.create({\n      data: { courseId, score, total },\n    });\n    revalidatePath(`/notes/${courseId}`);\n  } catch (error) {\n    console.error(\"Exam Save Error:\", error);\n  }\n}"],"names":[],"mappings":";;;;;;;IAyQsB,iBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 439, "column": 0}, "map": {"version":3,"sources":["file:///Users/emilyperez/Study%20App/my-study-app/src/components/ExamApp.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { saveExamResult } from \"../app/actions\";\n\ntype ExamQuestion = {\n  id: string;\n  question: string;\n  options: string[];\n  answer: string;\n  explanation: string;\n};\n\nexport default function ExamApp({ questions, courseId }: { questions: ExamQuestion[], courseId: string }) {\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [selectedOptions, setSelectedOptions] = useState<{[key: number]: string}>({});\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [score, setScore] = useState(0);\n\n  const handleOptionSelect = (option: string) => {\n    if (isSubmitted) return;\n    setSelectedOptions(prev => ({\n        ...prev,\n        [currentQuestion]: option\n    }));\n  };\n\n  const handleSubmit = async () => {\n    // Calculate Score\n    let newScore = 0;\n    questions.forEach((q, index) => {\n        if (selectedOptions[index] === q.answer) {\n            newScore++;\n        }\n    });\n    \n    setScore(newScore);\n    setIsSubmitted(true);\n    await saveExamResult(courseId, newScore, questions.length);\n  };\n\n  // --- REVIEW MODE (After Submit) ---\n  if (isSubmitted) {\n    return (\n        <div className=\"bg-white p-10 rounded-xl shadow-lg border border-purple-100 mt-12 block\">\n            <h2 className=\"text-3xl font-bold text-purple-700 mb-6\">üìù Exam Results</h2>\n            \n            <div className=\"bg-purple-50 p-6 rounded-xl border border-purple-100 text-center mb-8\">\n                <p className=\"text-gray-600 font-medium uppercase tracking-wide text-sm\">Your Score</p>\n                <p className=\"text-5xl font-extrabold text-purple-800 mt-2\">\n                    {score} / {questions.length}\n                </p>\n                <p className=\"text-purple-600 mt-2 font-medium\">\n                    {Math.round((score / questions.length) * 100)}%\n                </p>\n            </div>\n\n            <div className=\"space-y-8\">\n                {questions.map((q, index) => {\n                    const userAnswer = selectedOptions[index];\n                    const isCorrect = userAnswer === q.answer;\n\n                    // Only show wrong answers or all answers? Let's show all for review.\n                    return (\n                        <div key={q.id} className={`p-6 rounded-xl border-2 ${isCorrect ? 'border-green-100 bg-green-50/30' : 'border-red-100 bg-red-50/30'}`}>\n                            <p className=\"font-bold text-gray-800 mb-4\">\n                                <span className=\"mr-2 text-gray-400\">#{index + 1}</span> {q.question}\n                            </p>\n                            \n                            <div className=\"grid gap-2 mb-4\">\n                                {q.options.map((opt) => {\n                                    let colorClass = \"bg-white border-gray-200 text-gray-500\";\n                                    // Logic for coloring options in review\n                                    if (opt === q.answer) colorClass = \"bg-green-100 border-green-500 text-green-800 font-bold\";\n                                    else if (opt === userAnswer) colorClass = \"bg-red-100 border-red-500 text-red-800\";\n                                    \n                                    return (\n                                        <div key={opt} className={`p-3 rounded-lg border ${colorClass} text-sm`}>\n                                            {opt}\n                                        </div>\n                                    )\n                                })}\n                            </div>\n\n                            {!isCorrect && (\n                                <div className=\"bg-white p-4 rounded-lg border border-purple-100 mt-2\">\n                                    <p className=\"text-xs font-bold text-purple-500 uppercase mb-1\">Explanation</p>\n                                    <p className=\"text-sm text-gray-700 leading-relaxed\">{q.explanation}</p>\n                                </div>\n                            )}\n                        </div>\n                    );\n                })}\n            </div>\n            \n            <button \n                onClick={() => window.location.reload()}\n                className=\"w-full mt-8 py-4 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-700 transition\"\n            >\n                Start New Exam\n            </button>\n        </div>\n    );\n  }\n\n  // --- TESTING MODE (Taking the exam) ---\n  return (\n    <div className=\"bg-white p-10 rounded-xl shadow-lg border border-purple-100 mt-12 block\">\n      \n      {/* Header */}\n      <div className=\"flex justify-between items-center border-b border-purple-50 pb-6 mb-8\">\n        <h2 className=\"text-2xl font-bold text-purple-700 flex items-center gap-2\">\n            üìù Practice Midterm\n        </h2>\n        <span className=\"text-sm font-bold text-purple-600 bg-purple-50 px-4 py-2 rounded-full\">\n          Question {currentQuestion + 1} / {questions.length}\n        </span>\n      </div>\n\n      {/* Question */}\n      <div className=\"mb-8\">\n        <h3 className=\"text-xl font-bold text-gray-900 leading-relaxed\">\n            {questions[currentQuestion].question}\n        </h3>\n      </div>\n\n      {/* Options */}\n      <div className=\"grid gap-4 mb-8\">\n        {questions[currentQuestion].options.map((option) => (\n            <button\n                key={option}\n                onClick={() => handleOptionSelect(option)}\n                className={`w-full text-left p-5 rounded-xl border-2 transition-all duration-200 font-medium\n                ${selectedOptions[currentQuestion] === option \n                    ? 'border-purple-600 bg-purple-50 text-purple-900 shadow-sm' \n                    : 'border-gray-100 hover:border-purple-200 hover:bg-gray-50 text-gray-700'}`}\n            >\n                {option}\n            </button>\n        ))}\n      </div>\n\n      {/* Footer Navigation */}\n      <div className=\"flex justify-between items-center pt-6 border-t border-gray-100\">\n        <button \n            onClick={() => setCurrentQuestion(prev => Math.max(0, prev - 1))}\n            disabled={currentQuestion === 0}\n            className=\"px-6 py-3 text-gray-500 font-bold hover:bg-gray-100 rounded-lg disabled:opacity-30 transition\"\n        >\n            ‚Üê Back\n        </button>\n\n        {currentQuestion === questions.length - 1 ? (\n            <button \n                onClick={handleSubmit}\n                className=\"px-8 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-700 shadow-md hover:shadow-lg transition transform hover:-translate-y-0.5\"\n            >\n                Submit Exam üèÅ\n            </button>\n        ) : (\n            <button \n                onClick={() => setCurrentQuestion(prev => Math.min(questions.length - 1, prev + 1))}\n                className=\"px-8 py-3 bg-gray-900 text-white font-bold rounded-xl hover:bg-gray-800 shadow-md transition\"\n            >\n                Next Question ‚Üí\n            </button>\n        )}\n      </div>\n\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 745, "column": 0}, "map": {"version":3,"sources":["file:///Users/emilyperez/Study%20App/my-study-app/src/components/CrosswordApp.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\n\ntype CrosswordData = {\n  grid: string[][];      // The letters (Answers)\n  numbers: number[][];   // The small numbers in the corner\n  clues: {\n    across: { number: number; clue: string }[];\n    down: { number: number; clue: string }[];\n  };\n};\n\nexport default function CrosswordApp({ puzzleData }: { puzzleData: any }) {\n  const data = puzzleData as CrosswordData;\n  const [userGrid, setUserGrid] = useState<string[][]>(\n    Array(10).fill(null).map(() => Array(10).fill(\"\"))\n  );\n  const [showAnswers, setShowAnswers] = useState(false);\n\n  // Handle typing in a cell\n  const handleChange = (r: number, c: number, value: string) => {\n    const val = value.slice(-1).toUpperCase(); // Take last char, uppercase\n    const newGrid = [...userGrid];\n    newGrid[r][c] = val;\n    setUserGrid(newGrid);\n  };\n\n  return (\n    <div className=\"bg-white p-8 rounded-xl shadow-lg border border-teal-100 mt-8\">\n      \n      {/* HEADER */}\n      <div className=\"flex justify-between items-center mb-8 border-b border-teal-50 pb-4\">\n        <h2 className=\"text-3xl font-bold text-teal-700 tracking-tight flex items-center gap-2\">\n          üß© Crossword Puzzle\n        </h2>\n        <button \n          onClick={() => setShowAnswers(!showAnswers)}\n          className=\"text-sm font-bold text-teal-600 bg-teal-50 px-4 py-2 rounded-full hover:bg-teal-100 transition\"\n        >\n          {showAnswers ? \"Hide Answers\" : \"Reveal Answers üëÅÔ∏è\"}\n        </button>\n      </div>\n\n      <div className=\"flex flex-col lg:flex-row gap-10\">\n        \n        {/* THE GRID */}\n        <div className=\"flex-shrink-0\">\n          <div \n            className=\"grid gap-[2px] bg-gray-300 border-4 border-gray-800 p-[2px] w-fit mx-auto lg:mx-0 shadow-xl\"\n            style={{ gridTemplateColumns: \"repeat(10, 1fr)\" }}\n          >\n            {data.grid.map((row, r) => \n              row.map((cell, c) => {\n                const isBlack = cell === \"\";\n                const number = data.numbers[r][c];\n                const displayChar = showAnswers ? cell : userGrid[r][c];\n                \n                // Color logic: Correct = Green text, Wrong = Red text (if filled)\n                const isCorrect = userGrid[r][c] === cell;\n                const textColor = showAnswers ? \"text-teal-700\" : (userGrid[r][c] && !isCorrect ? \"text-red-500\" : \"text-black\");\n\n                return (\n                  <div \n                    key={`${r}-${c}`} \n                    className={`relative w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center font-bold text-xl uppercase\n                      ${isBlack ? \"bg-gray-900\" : \"bg-white\"}`}\n                  >\n                    {!isBlack && (\n                      <>\n                        {/* Tiny Number */}\n                        {number > 0 && (\n                          <span className=\"absolute top-0.5 left-0.5 text-[8px] sm:text-[10px] leading-none text-gray-500 font-sans\">\n                            {number}\n                          </span>\n                        )}\n                        {/* Input */}\n                        <input \n                          type=\"text\"\n                          value={displayChar}\n                          disabled={showAnswers}\n                          onChange={(e) => handleChange(r, c, e.target.value)}\n                          className={`w-full h-full text-center bg-transparent focus:bg-teal-50 focus:outline-none ${textColor}`}\n                        />\n                      </>\n                    )}\n                  </div>\n                );\n              })\n            )}\n          </div>\n        </div>\n\n        {/* CLUES LIST */}\n        <div className=\"flex-1 grid md:grid-cols-2 gap-8 h-[500px] overflow-y-auto custom-scrollbar pr-2\">\n          \n          {/* ACROSS */}\n          <div>\n            <h3 className=\"font-bold text-teal-800 border-b-2 border-teal-100 mb-3 pb-1 uppercase tracking-wider text-sm\">\n              Across\n            </h3>\n            <ul className=\"space-y-3\">\n              {data.clues.across.map((item) => (\n                <li key={item.number} className=\"text-sm text-gray-600\">\n                  <span className=\"font-bold text-teal-600 mr-1\">{item.number}.</span>\n                  {item.clue}\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          {/* DOWN */}\n          <div>\n            <h3 className=\"font-bold text-teal-800 border-b-2 border-teal-100 mb-3 pb-1 uppercase tracking-wider text-sm\">\n              Down\n            </h3>\n            <ul className=\"space-y-3\">\n              {data.clues.down.map((item) => (\n                <li key={item.number} className=\"text-sm text-gray-600\">\n                  <span className=\"font-bold text-teal-600 mr-1\">{item.number}.</span>\n                  {item.clue}\n                </li>\n              ))}\n            </ul>\n          </div>\n\n        </div>\n\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAae,SAAS,aAAa,EAAE,UAAU,EAAuB;IACtE,MAAM,OAAO;IACb,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EACtC,MAAM,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,IAAM,MAAM,IAAI,IAAI,CAAC;IAEhD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,0BAA0B;IAC1B,MAAM,eAAe,CAAC,GAAW,GAAW;QAC1C,MAAM,MAAM,MAAM,KAAK,CAAC,CAAC,GAAG,WAAW,IAAI,4BAA4B;QACvE,MAAM,UAAU;eAAI;SAAS;QAC7B,OAAO,CAAC,EAAE,CAAC,EAAE,GAAG;QAChB,YAAY;IACd;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAGb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA0E;;;;;;kCAGxF,8OAAC;wBACC,SAAS,IAAM,eAAe,CAAC;wBAC/B,WAAU;kCAET,cAAc,iBAAiB;;;;;;;;;;;;0BAIpC,8OAAC;gBAAI,WAAU;;kCAGb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,WAAU;4BACV,OAAO;gCAAE,qBAAqB;4BAAkB;sCAE/C,KAAK,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,IACnB,IAAI,GAAG,CAAC,CAAC,MAAM;oCACb,MAAM,UAAU,SAAS;oCACzB,MAAM,SAAS,KAAK,OAAO,CAAC,EAAE,CAAC,EAAE;oCACjC,MAAM,cAAc,cAAc,OAAO,QAAQ,CAAC,EAAE,CAAC,EAAE;oCAEvD,kEAAkE;oCAClE,MAAM,YAAY,QAAQ,CAAC,EAAE,CAAC,EAAE,KAAK;oCACrC,MAAM,YAAY,cAAc,kBAAmB,QAAQ,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,YAAY,iBAAiB;oCAEnG,qBACE,8OAAC;wCAEC,WAAW,CAAC;sBACV,EAAE,UAAU,gBAAgB,YAAY;kDAEzC,CAAC,yBACA;;gDAEG,SAAS,mBACR,8OAAC;oDAAK,WAAU;8DACb;;;;;;8DAIL,8OAAC;oDACC,MAAK;oDACL,OAAO;oDACP,UAAU;oDACV,UAAU,CAAC,IAAM,aAAa,GAAG,GAAG,EAAE,MAAM,CAAC,KAAK;oDAClD,WAAW,CAAC,6EAA6E,EAAE,WAAW;;;;;;;;uCAlBvG,GAAG,EAAE,CAAC,EAAE,GAAG;;;;;gCAwBtB;;;;;;;;;;;kCAMN,8OAAC;wBAAI,WAAU;;0CAGb,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;kDAAgG;;;;;;kDAG9G,8OAAC;wCAAG,WAAU;kDACX,KAAK,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,qBACtB,8OAAC;gDAAqB,WAAU;;kEAC9B,8OAAC;wDAAK,WAAU;;4DAAgC,KAAK,MAAM;4DAAC;;;;;;;oDAC3D,KAAK,IAAI;;+CAFH,KAAK,MAAM;;;;;;;;;;;;;;;;0CAS1B,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;kDAAgG;;;;;;kDAG9G,8OAAC;wCAAG,WAAU;kDACX,KAAK,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,qBACpB,8OAAC;gDAAqB,WAAU;;kEAC9B,8OAAC;wDAAK,WAAU;;4DAAgC,KAAK,MAAM;4DAAC;;;;;;;oDAC3D,KAAK,IAAI;;+CAFH,KAAK,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAapC"}}]
}